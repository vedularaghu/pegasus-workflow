<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="936px" height="451px" viewBox="-0.5 -0.5 936 451" content="&lt;mxfile host=&quot;app.diagrams.net&quot; modified=&quot;2020-07-15T23:00:02.666Z&quot; agent=&quot;5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/83.0.4103.116 Safari/537.36&quot; version=&quot;13.4.3&quot; etag=&quot;ogVFPd6m3EisDn6BGjlA&quot; type=&quot;google&quot;&gt;&lt;diagram id=&quot;P_fXWrNiIIqTpuNDiH8a&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;"><defs/><g><rect x="5" y="390" width="120" height="60" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 420px; margin-left: 6px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">saved_state.txt</div></div></div></foreignObject><text x="65" y="424" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">saved_state.txt</text></switch></g><ellipse cx="180" cy="265" rx="75" ry="75" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 265px; margin-left: 106px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">print_nums<br />(print_nums.py)</div></div></div></foreignObject><text x="180" y="269" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">print_nums...</text></switch></g><rect x="295" y="0" width="640" height="360" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 638px; height: 1px; padding-top: 180px; margin-left: 297px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Create a file called saved_stated.txt that has the number 0 in it. <br /><br />Create a program called print_nums.py that uses the number in saved_state.txt as a starting point. print_nums.py should print the number, sleep for a second, then print number+1, sleep for a second, ... all the way until 180 inclusive.<br /><br />If the program receives a SIGTERM midway during execution, it should write its current number to saved_state.txt. When the program finishes, it should write its current number to saved_state.txt. You can test that this program works correctly by using `kill &lt;pid&gt;` on it while it is running. <br /><br />When creating the print_nums job, do not add saved_state.txt as an input or an output. Rather, add it as a checkpoint. Add "out.txt" as a stdout file.  Add the following to that job:<br /><br /><pre style="margin-top: 0px ; margin-bottom: 0px ; padding: 0px ; font-size: 14px ; color: rgb(51 , 51 , 51) ; border-radius: 4px ; line-height: inherit ; word-break: break-all ; overflow-wrap: break-word ; background-color: rgb(247 , 247 , 247) ; border: none"> <span class="o" style="margin: 0px ; padding: 0px ; color: rgb(102 , 102 , 102)">.</span><span class="n" style="margin: 0px ; padding: 0px">add_profiles</span><span class="p" style="margin: 0px ; padding: 0px">(</span><span class="n" style="margin: 0px ; padding: 0px">Namespace</span><span class="o" style="margin: 0px ; padding: 0px ; color: rgb(102 , 102 , 102)">.</span><span class="n" style="margin: 0px ; padding: 0px">PEGASUS</span><span class="p" style="margin: 0px ; padding: 0px">,</span> <span class="n" style="margin: 0px ; padding: 0px">key</span><span class="o" style="margin: 0px ; padding: 0px ; color: rgb(102 , 102 , 102)">=</span><span class="s2" style="margin: 0px ; padding: 0px ; color: rgb(186 , 33 , 33)">"checkpoint.time"</span><span class="p" style="margin: 0px ; padding: 0px">,</span> <span class="n" style="margin: 0px ; padding: 0px">value</span><span class="o" style="margin: 0px ; padding: 0px ; color: rgb(102 , 102 , 102)">=</span><span class="mi" style="margin: 0px ; padding: 0px ; color: rgb(102 , 102 , 102)">1</span><span class="p" style="margin: 0px ; padding: 0px">)</span>\<br /> <span class="o" style="margin: 0px ; padding: 0px ; color: rgb(102 , 102 , 102)">.</span><span class="n" style="margin: 0px ; padding: 0px">add_profiles</span><span class="p" style="margin: 0px ; padding: 0px">(</span><span class="n" style="margin: 0px ; padding: 0px">Namespace</span><span class="o" style="margin: 0px ; padding: 0px ; color: rgb(102 , 102 , 102)">.</span><span class="n" style="margin: 0px ; padding: 0px">PEGASUS</span><span class="p" style="margin: 0px ; padding: 0px">,</span> <span class="n" style="margin: 0px ; padding: 0px">key</span><span class="o" style="margin: 0px ; padding: 0px ; color: rgb(102 , 102 , 102)">=</span><span class="s2" style="margin: 0px ; padding: 0px ; color: rgb(186 , 33 , 33)">"maxwalltime"</span><span class="p" style="margin: 0px ; padding: 0px">,</span> <span class="n" style="margin: 0px ; padding: 0px">value</span><span class="o" style="margin: 0px ; padding: 0px ; color: rgb(102 , 102 , 102)">=</span><span class="mi" style="margin: 0px ; padding: 0px ; color: rgb(102 , 102 , 102)">2</span><span class="p" style="margin: 0px ; padding: 0px">)</span></pre><br />Additionally, add saved_state.txt to the replica catalog. <br /><br />At the top of your workflow script,  add the following snippet. <br /><br /><pre style="margin-top: 0px ; margin-bottom: 0px ; padding: 0px ; font-size: 14px ; color: rgb(51 , 51 , 51) ; border-radius: 4px ; line-height: inherit ; word-break: break-all ; overflow-wrap: break-word ; background-color: rgb(247 , 247 , 247) ; border: none"><span style="color: rgb(64 , 128 , 128) ; font-family: &quot;helvetica&quot; ; font-style: italic"># Properties</span><br /></pre><pre style="margin-top: 0px ; margin-bottom: 0px ; padding: 0px ; font-size: 14px ; color: rgb(51 , 51 , 51) ; border-radius: 4px ; line-height: inherit ; word-break: break-all ; overflow-wrap: break-word ; background-color: rgb(247 , 247 , 247) ; border: none"><span class="n" style="margin: 0px ; padding: 0px">props</span> <span class="o" style="margin: 0px ; padding: 0px ; color: rgb(102 , 102 , 102)">=</span> <span class="n" style="margin: 0px ; padding: 0px">Properties</span><span class="p" style="margin: 0px ; padding: 0px">()</span><br /><span class="n" style="margin: 0px ; padding: 0px">props</span><span class="p" style="margin: 0px ; padding: 0px">[</span><span class="s2" style="margin: 0px ; padding: 0px ; color: rgb(186 , 33 , 33)">"dagman.retry"</span><span class="p" style="margin: 0px ; padding: 0px">]</span> <span class="o" style="margin: 0px ; padding: 0px ; color: rgb(102 , 102 , 102)">=</span> <span class="s2" style="margin: 0px ; padding: 0px ; color: rgb(186 , 33 , 33)">"5"</span><br /><span class="n" style="margin: 0px ; padding: 0px">props</span><span class="o" style="margin: 0px ; padding: 0px ; color: rgb(102 , 102 , 102)">.</span><span class="n" style="margin: 0px ; padding: 0px">write</span><span class="p" style="margin: 0px ; padding: 0px">()</span></pre><div><span class="p" style="margin: 0px ; padding: 0px"><br /></span></div></div></div></div></foreignObject><text x="297" y="184" fill="#000000" font-family="Helvetica" font-size="12px">Create a file called saved_stated.txt that has the number 0 in it....</text></switch></g><rect x="0" y="70" width="175" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 173px; height: 1px; padding-top: 90px; margin-left: 1px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font style="font-size: 26px">Workflow 5</font></div></div></div></foreignObject><text x="88" y="94" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Workflow 5</text></switch></g><path d="M 180 340 L 70.84 387.46" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 66.03 389.55 L 71.05 383.55 L 70.84 387.46 L 73.84 389.97 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 180 340 L 279.25 387.26" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 283.99 389.52 L 276.17 389.67 L 279.25 387.26 L 279.18 383.35 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="225" y="390" width="120" height="60" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 420px; margin-left: 226px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">out.txt</div></div></div></foreignObject><text x="285" y="424" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">out.txt</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://desk.draw.io/support/solutions/articles/16000042487" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>